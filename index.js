"use strict";var _log,_warn,_error,_info,_deviceIdentifier,_serverUrl,__spreadArray=this&&this.__spreadArray||function(e,o,r){if(r||2===arguments.length)for(var n,t=0,i=o.length;t<i;t++)!n&&t in o||((n=n||Array.prototype.slice.call(o,0,t))[t]=o[t]);return e.concat(n||Array.prototype.slice.call(o))},_pending=(exports.__esModule=!0,exports.initLogger=void 0);function initLogger(e){var o;_log=window.console.log,_warn=window.console.error,_error=window.console.error,_info=window.console.info,_serverUrl=e,window.console.log=consoleLog,window.console.warn=consoleWarn,window.console.error=consoleError,window.console.info=consoleInfo,post("/devices",{id:getDeviceIdentifier(),agent:window.navigator.userAgent,title:window.document.title}),setInterval(function(){document.location.href!=o&&(o=document.location.href,_log("Url changed to ".concat(o)))},1e3)}function getDeviceIdentifier(){var e,o;return _deviceIdentifier||(e=localStorage.IonicLoggerDeviceId,o=parseInt(e),null!=e&&!isNaN(o)||(o=Math.floor(999999999*Math.random()),localStorage.IonicLoggerDeviceId=o),_deviceIdentifier=o.toString()),_deviceIdentifier}function write(e,o,r){var o=Array.prototype.slice.call(o),n=e;o.forEach(function(e){""!=n&&(n+=" "),n+="object"==typeof e?JSON.stringify(e):e}),_pending||(_pending=[],setTimeout(function(){post("/log",_pending),_pending=void 0},500)),_pending.push({id:getDeviceIdentifier(),message:n,level:r,stack:void 0})}function getStack(){var e=(new Error).stack,e=null==e?void 0:e.split("\n");return null!=e&&e.splice(0,4),e&&0!=e.length?e[0].substr(7,e[0].length-7):""}function post(e,o){if(o)try{fetch("http://".concat(_serverUrl).concat(e),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})}catch(e){}}function consoleLog(e){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];_log.call.apply(_log,__spreadArray([this,e],o,!1)),write(e,o,"log")}function consoleWarn(e){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];_warn.call.apply(_warn,__spreadArray([this,e],o,!1)),write(e,o,"warn")}function consoleError(e){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];_error.call.apply(_error,__spreadArray([this,e],o,!1)),write(e,o,"error")}function consoleInfo(e){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];_info.call.apply(_info,__spreadArray([this,e],o,!1)),write(e,o,"info")}exports.initLogger=initLogger;